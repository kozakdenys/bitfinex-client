(this["webpackJsonpbitfinex-client"]=this["webpackJsonpbitfinex-client"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(9),s=n.n(r),o=(n(14),n(2)),i={price:"PRICE",count:"COUNT",amount:"AMOUNT",total:"TOTAL"},l=n(3);function u(e,t){var n,c=Object(o.a)(e,3),a=c[0],r=c[1],s=c[2];return(n={},Object(l.a)(n,i.price,a),Object(l.a)(n,i.count,r),Object(l.a)(n,i.amount,s),n)[t]}var b=n(0),j=function(){return Object(b.jsx)("svg",{width:60,version:"1.1",id:"L9",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",xmlSpace:"preserve",children:Object(b.jsx)("path",{fill:"#fff",d:"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50",children:Object(b.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})})})};n(16);var d=function(e){var t=e.columns,n=e.rows,a=Object(c.useMemo)((function(){return n.reduce((function(e,t,n){return e.push((e[n-1]||0)+u(t,i.amount)),e}),[])}),[n]);return Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("thead",{children:Object(b.jsx)("tr",{className:"table__row",children:t.map((function(e){return Object(b.jsx)("th",{className:"table__cell table__cell--header ".concat(e===i.count?"table__cell--center":""),children:e},e)}))})}),Object(b.jsxs)("tbody",{children:[n.map((function(e,n){return Object(b.jsx)("tr",{className:"table__row",children:t.map((function(t){var c;return c=t===i.price?u(e,t)/1e3:t===i.amount?Math.round(1e4*u(e,t))/1e4:t===i.total?Math.round(1e4*a[n])/1e4:u(e,t),Object(b.jsx)("td",{className:"table__cell ".concat(t===i.count?"table__cell--center":""),children:c},t)}))},u(e,i.price))})),0===n.length&&Object(b.jsx)("tr",{className:"table__row",children:Object(b.jsx)("td",{className:"table__cell table__cell--center",colSpan:t.length,children:Object(b.jsx)(j,{})})})]})]})},f=n(6),O=n(8),h={bids:[],asks:[],holdingData:[]};function p(e,t){var n=e.bids,c=e.asks,a=e.holdingData,r=t.payload;switch(t.type){case"ADD_HOLDING_DATA":return Object(O.a)(Object(O.a)({},e),{},{holdingData:[].concat(Object(f.a)(a),[r])});case"SAVE_HOLDING_DATA":var s=n,l=c;return a.forEach((function(e){if(Array.isArray(e[0]))s=e.slice(0,e.length/2),l=e.slice(-e.length/2);else{var t,n=(t=u(e,i.amount)>0?s=Object(f.a)(s):l=Object(f.a)(l)).findIndex((function(t){return Object(o.a)(t,1)[0]===u(e,i.price)}));-1===n?(t.push(e),t.sort((function(e,t){return u(t,i.price)-u(e,i.price)}))):0===u(e,i.count)?t.splice(n,1):t[n]=e}})),{bids:s,asks:l,holdingData:[]};default:throw new Error}}n(17);var m=function(){var e=function(e,t){var n=Object(c.useState)(new Date),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useReducer)(p,h),l=Object(o.a)(i,2),u=l[0],b=l[1];return Object(c.useEffect)((function(){var n,c=new WebSocket(e),a={event:"subscribe",channel:"book",pair:t};return c.onopen=function(){return c.send(JSON.stringify(a))},c.onmessage=function(e){var t=JSON.parse(e.data);t&&(n?Array.isArray(t)&&t[0]===n&&Array.isArray(t[1])&&b({type:"ADD_HOLDING_DATA",payload:t[1]}):"object"===typeof t&&"subscribed"===t.event&&t.channel===a.channel&&(n=t.chanId))},function(){return c.close()}}),[b,e,t]),Object(c.useEffect)((function(){setTimeout((function(){s(new Date),b({type:"SAVE_HOLDING_DATA"})}),500)}),[b,r]),[u.bids,u.asks]}("wss://api-pub.bitfinex.com/ws/2","tBTCUSD"),t=Object(o.a)(e,2),n=t[0],a=t[1],r=[i.count,i.amount,i.total,i.price],s=[].concat(r).reverse();return Object(b.jsxs)("div",{className:"book__container",children:[Object(b.jsx)(d,{columns:r,rows:n}),Object(b.jsx)(d,{columns:s,rows:a})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(m,{})}),document.getElementById("root")),x()}},[[18,1,2]]]);
//# sourceMappingURL=main.eb2b1e26.chunk.js.map